version: '3'
services:

  clip-apiserver-debug:
    container_name: clip-apiserver-debug
    image: clip/apiserver:debug
    command: /bin/sh dev.sh apiserver
    build:
      context: .
      dockerfile: ./apiserver/Dockerfile
      target: apiserver-dev
    networks:
      - clip-network
    ports:
      - "8000:8000"
    volumes:
      - ./apiserver:/clip/apiserver
      - ./scripts:/clip/scripts

  clip-spa-debug:
    container_name: clip-spa-debug
    image: clip/spa:debug
    command: /bin/sh dev.sh spa
    build:
      context: .
      dockerfile: ./spa/Dockerfile
      target: spa-dev
    ports: 
      - "4200:4200"
      - "9222:9222"
    networks:
      - clip-network
    volumes:
      - ./spa:/clip/spa
      - ./scripts:/clip/scripts

networks:
  clip-network:
    name: clip-network